<!doctype html>
<html lang="ar" class="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>ุบุฑูุฉ ุงููุฏููุฉ</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div>๐๏ธ ูุฏููุฉ - ูุดุฑ ุงููุงููุฑุง ูุงููุงูู</div>
      <div class="toolbar">
        <button id="logoutBtn" class="btn danger">ุฎุฑูุฌ</button>
      </div>
    </header>

    <div class="container">
      <div class="card">
        <h3>ุชุฌููุฒ ุงูุงุชุตุงู</h3>
        <div id="status" class="small" style="margin:6px 0 12px;">ุฌุงุฑู ุชุญุถูุฑ ุงูุตูุญุฉโฆ</div>

        <div class="grid cols-2">
          <div>
            <label>ุงููุงููุฑุง:</label>
            <select id="camSel" class="input"></select>
          </div>
          <div>
            <label>ุงููุงูู:</label>
            <select id="micSel" class="input"></select>
          </div>
        </div>

        <div class="toolbar">
          <button id="permBtn" class="btn secondary">ููุญ ุฅุฐู ุงููุงููุฑุง/ุงููุงูู</button>
          <button id="joinBtn" class="btn">ุงุชุตุงู</button>
          <button id="leaveBtn" class="btn secondary" disabled>ูุบุงุฏุฑุฉ</button>
        </div>

        <hr />
        <div class="video-grid cols-1">
          <div class="video-tile">
            <video id="preview" autoplay playsinline muted></video>
            <div class="label">ุงููุนุงููุฉ</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ุชุญููู LiveKit ูู CDN ูุน ุจุฏูู ุชููุงุฆู -->
    <script>
(function loadLiveKit() {
  var tried = 0;
  var urls = [
    "https://unpkg.com/@livekit/client@2.3.0/dist/livekit-client.umd.min.js",
    "https://esm.sh/@livekit/client@2.3.0?bundle&target=es2019"
  ];
  function loadNext() {
    if (tried >= urls.length) return alert("ุชุนุฐุฑ ุชุญููู LiveKit");
    var s = document.createElement("script");
    s.src = urls[tried++];
    s.onload = function(){ console.log("LiveKit loaded from", s.src); };
    s.onerror = loadNext;
    document.head.appendChild(s);
  }
  loadNext();
})();
</script>

    <!-- ุณูุฑุจุชุงุช ุงููุดุฑูุน -->
    <script src="/common.js"></script>
    <script src="/logout-fix.js"></script>
    <script src="/city.js"></script>
  </body>
</html>
