<!doctype html>
<html lang="ar" class="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>المشاهدة</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div>📺 غرفة المشاهدة</div>
      <div class="toolbar">
        <button id="fsBtn" class="btn fullscreen-btn">ملء الشاشة</button>
        <button id="logoutBtn" class="btn danger">خروج</button>
      </div>
    </header>

    <div class="video-grid cols-1">
      <div class="video-tile">
        <video id="player" autoplay playsinline controls></video>
        <div class="label">البث</div>
      </div>
    </div>

    <!-- LiveKit CDN + fallback -->
    <script>
(function loadLiveKit() {
  var tried = 0;
  var urls = [
    "https://unpkg.com/@livekit/client@2.3.0/dist/livekit-client.umd.min.js",
    "https://esm.sh/@livekit/client@2.3.0?bundle&target=es2019"
  ];
  function loadNext() {
    if (tried >= urls.length) return alert("تعذر تحميل LiveKit");
    var s = document.createElement("script");
    s.src = urls[tried++];
    s.onload = function(){ console.log("LiveKit loaded from", s.src); };
    s.onerror = loadNext;
    document.head.appendChild(s);
  }
  loadNext();
})();
</script>
    <!-- سكربتات المشروع -->
    <script src="/common.js"></script>
    <script src="/logout-fix.js"></script>
    <script src="/watch.js"></script>
  </body>
</html>
